{% extends "base.html" %}

{% block content %}
<div style="max-width: 900px; margin: 0 auto;">
    
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
        <div>
            <h4 style="color: var(--gold); margin-bottom: 5px;">√ÅREA ADMINISTRATIVA</h4>
            <h2 style="color: white; margin: 0;">CONFIGURAR HOR√ÅRIOS</h2>
        </div>
        <a href="{{ url_for('dashboard') }}" class="btn btn-secondary">VOLTAR</a>
    </div>

    <div class="card">
        <p style="color: #888; margin-bottom: 20px;">
            Defina os turnos de trabalho. Desmarque a caixa "Aberto" para fechar o dia.
        </p>

        <form method="POST">
            <table class="hours-table">
                <thead>
                    <tr>
                        <th style="width: 15%;">DIA</th>
                        <th style="width: 10%;">STATUS</th>
                        <th>TURNO 1 (MANH√É)</th>
                        <th>TURNO 2 (TARDE)</th>
                    </tr>
                </thead>
                <tbody>
                    {% for day in days_data %}
                    <tr class="hours-row {% if day.is_closed %}disabled{% endif %}" id="row_{{ day.id }}">
                        
                        <td style="color: white; font-weight: bold;">{{ day.name }}</td>
                        
                        <td class="checkbox-cell" style="text-align: center;">
                            <label style="color: #aaa; font-size: 14px; cursor: pointer;">
                                <input type="checkbox" name="closed_{{ day.id }}" 
                                       onchange="toggleDay({{ day.id }}, this)"
                                       {% if day.is_closed %}checked{% endif %}>
                                Fechado
                            </label>
                        </td>

                        <td>
                            <div style="display: flex; align-items: center; justify-content: center;">
                                <input type="time" name="start1_{{ day.id }}" value="{{ day.s1 }}">
                                <span style="color: #666; margin: 0 5px;">at√©</span>
                                <input type="time" name="end1_{{ day.id }}" value="{{ day.e1 }}">
                            </div>
                        </td>

                        <td>
                            <div style="display: flex; align-items: center; justify-content: center;">
                                <input type="time" name="start2_{{ day.id }}" value="{{ day.s2 }}">
                                <span style="color: #666; margin: 0 5px;">at√©</span>
                                <input type="time" name="end2_{{ day.id }}" value="{{ day.e2 }}">
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>

            <div style="margin-top: 30px; text-align: right;">
                <button type="submit" class="btn btn-primary" style="padding: 15px 40px;">üíæ SALVAR ALTERA√á√ïES</button>
            </div>
        </form>
    </div>
</div>

<script>
    function toggleDay(id, checkbox) {
        const row = document.getElementById('row_' + id);
        
        if (checkbox.checked) {
            // Se marcou "Fechado", adiciona a classe visual de desabilitado
            row.classList.add('disabled');
        } else {
            // Se desmarcou, remove a classe e ativa os inputs
            row.classList.remove('disabled');
        }
    }
</script>
{% endblock %}