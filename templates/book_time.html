{% extends "base.html" %}

{% block content %}
<div style="max-width: 600px; margin: 0 auto;">
    <div class="card">
        <h2 style="color: var(--primary-color);">üìÖ Agendar: {{ service.name }}</h2>
        <p style="color: #666;">Escolha o melhor dia e hor√°rio para si.</p>
        <hr style="border: 0; border-top: 1px solid #eee; margin: 20px 0;">

        <form method="GET" id="dateForm" style="background: #f9f9f9; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
            <label style="font-weight: bold;">Alterar Data:</label>
            <input type="date" name="date" value="{{ selected_date }}" min="{{ today }}" onchange="document.getElementById('dateForm').submit()" style="margin-bottom: 0;">
        </form>

        <h3>Hor√°rios Dispon√≠veis para {{ selected_date.strftime('%d/%m') }}:</h3>
        
        <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 15px;">
            {% if available_slots %}
                {% for slot in available_slots %}
                    <a href="{{ url_for('confirm_booking', service_id=service.id, slot=slot.strftime('%Y-%m-%d_%H-%M-%S')) }}" 
                       class="btn btn-success" 
                       style="padding: 10px 20px; font-size: 14px;">
                        {{ slot.strftime('%H:%M') }}
                    </a>
                {% endfor %}
            {% else %}
                <p style="color: #e74c3c; background: #fff0f0; padding: 10px; border-radius: 4px; width: 100%;">
                    ‚ùå Nenhum hor√°rio dispon√≠vel nesta data. Tente outro dia!
                </p>
            {% endif %}
        </div>

        <br><br>
        <a href="{{ url_for('book_service') }}" class="btn btn-secondary">‚¨ÖÔ∏è Voltar</a>
    </div>
</div>
{% endblock %}